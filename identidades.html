<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Ceremonia Simb√≥lica de Identidades Trigonom√©tricas</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; color: #222; }
    input, button { margin: 5px; padding: 6px; font-size: 16px; }
    label { display: block; margin-top: 10px; }
    canvas { border: 1px solid #000; margin-top: 20px; background: #fff; }
  </style>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
</head>
<body>
  <h2>üìê Ceremonia Simb√≥lica de Identidades Trigonom√©tricas</h2>
  <p>Ingresa expresiones algebraicas para los lados del tri√°ngulo rect√°ngulo:</p>

  <label>Cateto a (adyacente al √°ngulo A): <input type="text" id="a" placeholder="ej. 10 + sqrt(2)"></label>
  <label>Cateto b (opuesto al √°ngulo A): <input type="text" id="b" placeholder="ej. sqrt(27) + 2*sqrt(3)"></label>
  <button onclick="resolver()">Calcular razones simb√≥licas</button>

  <div id="resultado" style="margin-top:20px;"></div>
  <canvas id="triangulo" width="800" height="600"></canvas>

  <script>
    function resolver() {
      const aExpr = document.getElementById("a").value;
      const bExpr = document.getElementById("b").value;

      try {
        const a = math.evaluate(aExpr);
        const b = math.evaluate(bExpr);
        const cExpr = `sqrt((${aExpr})^2 + (${bExpr})^2)`;
        const c = math.evaluate(cExpr);

        const angleA = Math.atan(b / a) * 180 / Math.PI;
        const angleB = 90 - angleA;

        const resultado = `
          <h3>üìê Hipotenusa:</h3>
          <p>\

\[ c = \\sqrt{(${aExpr})^2 + (${bExpr})^2} = ${cExpr} \\approx ${c.toFixed(4)} \\]

</p>

          <h3>üìê Razones trigonom√©tricas para el √°ngulo A:</h3>
          <p>\

\[ \\sin(A) = \\frac{${bExpr}}{${cExpr}} \\approx ${(b / c).toFixed(4)} \\]

</p>
          <p>\

\[ \\cos(A) = \\frac{${aExpr}}{${cExpr}} \\approx ${(a / c).toFixed(4)} \\]

</p>
          <p>\

\[ \\tan(A) = \\frac{${bExpr}}{${aExpr}} \\approx ${(b / a).toFixed(4)} \\]

</p>
          <p>\

\[ \\cot(A) = \\frac{${aExpr}}{${bExpr}} \\approx ${(a / b).toFixed(4)} \\]

</p>
          <p>\

\[ \\sec(A) = \\frac{${cExpr}}{${aExpr}} \\approx ${(c / a).toFixed(4)} \\]

</p>
          <p>\

\[ \\csc(A) = \\frac{${cExpr}}{${bExpr}} \\approx ${(c / b).toFixed(4)} \\]

</p>

          <h3>‚úÖ Resultados inmediatos:</h3>
          <ul>
            <li>Cateto a = ${aExpr} ‚âà ${a.toFixed(4)}</li>
            <li>Cateto b = ${bExpr} ‚âà ${b.toFixed(4)}</li>
            <li>Hipotenusa = ${cExpr} ‚âà ${c.toFixed(4)}</li>
            <li>√Ångulo A ‚âà ${angleA.toFixed(4)}¬∞</li>
            <li>√Ångulo B ‚âà ${angleB.toFixed(4)}¬∞</li>
            <li>√Ångulo C = 90.00¬∞</li>
          </ul>
        `;

        document.getElementById("resultado").innerHTML = resultado;
        MathJax.typeset();

        // Dibujo del tri√°ngulo
        const canvas = document.getElementById("triangulo");
        const ctx = canvas.getContext("2d");
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        const escala = 20;
        const Cx = 100, Cy = 500;
        const Ax = Cx, Ay = Cy - b * escala;
        const Bx = Cx + a * escala, By = Cy;

        ctx.beginPath();
        ctx.moveTo(Cx, Cy);
        ctx.lineTo(Ax, Ay);
        ctx.lineTo(Bx, By);
        ctx.closePath();
        ctx.stroke();

        ctx.fillText("C", Cx - 10, Cy + 10);
        ctx.fillText("A", Ax - 10, Ay - 10);
        ctx.fillText("B", Bx + 10, By + 10);

        ctx.fillText(`a ‚âà ${a.toFixed(2)}`, (Cx + Bx)/2, Cy + 15);
        ctx.fillText(`b ‚âà ${b.toFixed(2)}`, Cx - 40, (Cy + Ay)/2);
        ctx.fillText(`c ‚âà ${c.toFixed(2)}`, (Ax + Bx)/2, (Ay + By)/2);

        ctx.fillText(`‚à†C = 90¬∞`, Cx + 6, Cy - 6);
        ctx.fillText(`‚à†A ‚âà ${angleA.toFixed(1)}¬∞`, Ax + 6, Ay + 16);
        ctx.fillText(`‚à†B ‚âà ${angleB.toFixed(1)}¬∞`, Bx - 50, By - 8);
      } catch (err) {
        document.getElementById("resultado").innerHTML = `<p>‚ö†Ô∏è Error en la expresi√≥n. Usa sintaxis como <code>sqrt(2)</code> o <code>10 + sqrt(3)</code>.</p>`;
      }
    }
  </script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js"></script>

  <div style="margin-top: 40px; text-align: center;">
    <button onclick="window.location.href='principal.html'" style="padding: 10px 20px; background-color: #4e342e; color: white; border: none; border-radius: 5px; font-size: 16px;">
      üö™ Salir del sistema
    </button>
    <p style="margin-top: 10px; font-style: italic; color: #555;">
      ‚ÄúCerrar esta rutina es honrar el tri√°ngulo que nos ense√±√≥ a mirar desde otro v√©rtice.‚Äù
    </p>
  </div>
</body>
</html>
