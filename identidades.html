<!DOCTYPE html>
<html>
<head>
  <title>Identidades Trigonom√©tricas Ritualizadas</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f9f9f9; }
    canvas { border: 1px solid #000; margin-top: 20px; }
    input { margin: 5px; width: 100px; }
    label { display: block; margin-top: 10px; }
  </style>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
</head>
<body>
  <h2>üìê Ceremonia de Identidades Trigonom√©tricas</h2>
  <p>Ingresa al menos dos lados del tri√°ngulo rect√°ngulo:</p>

  <label>Cateto a (adyacente al √°ngulo C): <input type="number" id="a"></label>
  <label>Cateto b (opuesto al √°ngulo C): <input type="number" id="b"></label>
  <label>Hipotenusa c: <input type="number" id="c"></label>
  <button onclick="resolver()">Calcular razones</button>

  <div id="resultado" style="margin-top:20px;"></div>
  <canvas id="triangulo" width="800" height="600"></canvas>

  <script>
    function resolver() {
      let a = parseFloat(document.getElementById("a").value);
      let b = parseFloat(document.getElementById("b").value);
      let c = parseFloat(document.getElementById("c").value);
      let resultado = "";

      if (a && b && !c) {
        c = Math.sqrt(a*a + b*b);
        resultado += `<h3>üìê C√°lculo de la hipotenusa:</h3>`;
        resultado += `<p>\

\[ c = \\sqrt{a^2 + b^2} = \\sqrt{${a}^2 + ${b}^2} = ${c.toFixed(2)} \\]

</p>`;
      } else if (c && b && !a) {
        if (c <= b) {
          resultado += `<p>‚ö†Ô∏è La hipotenusa debe ser mayor que el cateto.</p>`;
          document.getElementById("resultado").innerHTML = resultado;
          MathJax.typeset();
          return;
        }
        a = Math.sqrt(c*c - b*b);
        resultado += `<h3>üìê C√°lculo del cateto a:</h3>`;
        resultado += `<p>\

\[ a = \\sqrt{c^2 - b^2} = \\sqrt{${c}^2 - ${b}^2} = ${a.toFixed(2)} \\]

</p>`;
      } else if (c && a && !b) {
        if (c <= a) {
          resultado += `<p>‚ö†Ô∏è La hipotenusa debe ser mayor que el cateto.</p>`;
          document.getElementById("resultado").innerHTML = resultado;
          MathJax.typeset();
          return;
        }
        b = Math.sqrt(c*c - a*a);
        resultado += `<h3>üìê C√°lculo del cateto b:</h3>`;
        resultado += `<p>\

\[ b = \\sqrt{c^2 - a^2} = \\sqrt{${c}^2 - ${a}^2} = ${b.toFixed(2)} \\]

</p>`;
      }

      if (!(a && b && c)) {
        resultado += `<p>‚ö†Ô∏è Ingresa al menos dos lados v√°lidos.</p>`;
        document.getElementById("resultado").innerHTML = resultado;
        MathJax.typeset();
        return;
      }

      const sinC = b / c;
      const cosC = a / c;
      const tanC = b / a;
      const cotC = a / b;
      const secC = c / a;
      const cscC = c / b;
      const angleC = Math.atan(b / a) * 180 / Math.PI;
      const angleB = 90 - angleC;

      resultado += `<h3>üìê Razones trigonom√©tricas para el √°ngulo C:</h3>`;
      resultado += `<p>\

\[ \\sin(C) = \\frac{${b}}{${c}} = ${sinC.toFixed(4)} \\]

</p>`;
      resultado += `<p>\

\[ \\cos(C) = \\frac{${a}}{${c}} = ${cosC.toFixed(4)} \\]

</p>`;
      resultado += `<p>\

\[ \\tan(C) = \\frac{${b}}{${a}} = ${tanC.toFixed(4)} \\]

</p>`;
      resultado += `<p>\

\[ \\cot(C) = \\frac{${a}}{${b}} = ${cotC.toFixed(4)} \\]

</p>`;
      resultado += `<p>\

\[ \\sec(C) = \\frac{${c}}{${a}} = ${secC.toFixed(4)} \\]

</p>`;
      resultado += `<p>\

\[ \\csc(C) = \\frac{${c}}{${b}} = ${cscC.toFixed(4)} \\]

</p>`;

      resultado += `<h3>‚úÖ Resultados ritualizados:</h3>`;
      resultado += `<ul>`;
      resultado += `<li>Cateto a = ${a.toFixed(2)}</li>`;
      resultado += `<li>Cateto b = ${b.toFixed(2)}</li>`;
      resultado += `<li>Hipotenusa c = ${c.toFixed(2)}</li>`;
      resultado += `<li>√Ångulo C ‚âà ${angleC.toFixed(2)}¬∞</li>`;
      resultado += `<li>√Ångulo B ‚âà ${angleB.toFixed(2)}¬∞</li>`;
      resultado += `<li>√Ångulo A = 90¬∞</li>`;
      resultado += `</ul>`;

      document.getElementById("resultado").innerHTML = resultado;
      MathJax.typeset();

      const canvas = document.getElementById("triangulo");
      const ctx = canvas.getContext("2d");
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const escala = 20;
      const Cx = 100, Cy = 500;
      const Bx = Cx, By = Cy - b * escala;
      const Ax = Cx + a * escala, Ay = Cy;

      ctx.beginPath();
      ctx.moveTo(Cx, Cy); // C
      ctx.lineTo(Bx, By); // B
      ctx.lineTo(Ax, Ay); // A
      ctx.closePath();
      ctx.stroke();

      ctx.fillText("C", Cx - 10, Cy + 10);
      ctx.fillText("B", Bx - 10, By - 10);
      ctx.fillText("A", Ax + 10, Ay + 10);

      ctx.fillText(`a = ${a.toFixed(2)}`, (Cx + Ax)/2, Cy + 15);
      ctx.fillText(`b = ${b.toFixed(2)}`, Cx - 40, (Cy + By)/2);
      ctx.fillText(`c = ${c.toFixed(2)}`, (Ax + Bx)/2, (Ay + By)/2);

      ctx.fillText(`‚à†C ‚âà ${angleC.toFixed(1)}¬∞`, Cx + 5, Cy - 5);
      ctx.fillText(`‚à†B ‚âà ${angleB.toFixed(1)}¬∞`, Bx + 5, By + 5);
      ctx.fillText(`‚à†A = 90¬∞`, Ax - 30, Ay - 10);
    }
  </script>

  <div style="margin-top: 40px; text-align: center;">
    <button onclick="window.location.href='principal.html'" style="padding: 10px 20px; background-color: #4e342e; color: white; border: none; border-radius: 5px; font-size: 16px;">
      üö™ Salir del sistema
    </button>
  </div>
</body>
</html>
