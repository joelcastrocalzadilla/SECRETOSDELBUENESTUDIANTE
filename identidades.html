<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Identidades Trigonom√©tricas Ritualizadas</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; color: #222; }
    canvas { border: 1px solid #000; margin-top: 20px; background: #fff; }
    input { margin: 5px; width: 120px; padding: 6px; }
    label { display: block; margin-top: 10px; }
    button { padding: 8px 14px; cursor: pointer; background-color: #4e342e; color: white; border: none; border-radius: 5px; }
  </style>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
</head>
<body>
  <h2>üìê Ceremonia de Identidades Trigonom√©tricas</h2>
  <p>Ingresa al menos dos lados del tri√°ngulo rect√°ngulo. En esta rutina, <b>‚à†C = 90¬∞</b> por dise√±o.</p>

  <label>Cateto a (base): <input type="number" id="a" step="any" placeholder="ej. 8"></label>
  <label>Cateto b (altura): <input type="number" id="b" step="any" placeholder="ej. 6"></label>
  <label>Hipotenusa c: <input type="number" id="c" step="any" placeholder="ej. 10"></label>
  <button onclick="resolver()">Calcular razones</button>

  <div id="resultado" style="margin-top:20px;"></div>
  <canvas id="triangulo" width="800" height="600"></canvas>

  <script>
    function resolver() {
      const a = parseFloat(document.getElementById("a").value);
      const b = parseFloat(document.getElementById("b").value);
      let c = parseFloat(document.getElementById("c").value);
      let resultado = "";

      if (a && b && !c) {
        c = Math.sqrt(a*a + b*b);
        resultado += `<h3>üìê C√°lculo de la hipotenusa</h3>`;
        resultado += `<p>\

\[ c = \\sqrt{a^2 + b^2} = \\sqrt{${a}^2 + ${b}^2} = ${c.toFixed(2)} \\]

</p>`;
      } else if (c && b && !a) {
        if (c <= b) {
          resultado += `<p>‚ö†Ô∏è La hipotenusa debe ser mayor que el cateto.</p>`;
          document.getElementById("resultado").innerHTML = resultado;
          MathJax.typeset();
          return;
        }
        a = Math.sqrt(c*c - b*b);
        resultado += `<h3>üìê C√°lculo del cateto a</h3>`;
        resultado += `<p>\

\[ a = \\sqrt{c^2 - b^2} = \\sqrt{${c}^2 - ${b}^2} = ${a.toFixed(2)} \\]

</p>`;
      } else if (c && a && !b) {
        if (c <= a) {
          resultado += `<p>‚ö†Ô∏è La hipotenusa debe ser mayor que el cateto.</p>`;
          document.getElementById("resultado").innerHTML = resultado;
          MathJax.typeset();
          return;
        }
        b = Math.sqrt(c*c - a*a);
        resultado += `<h3>üìê C√°lculo del cateto b</h3>`;
        resultado += `<p>\

\[ b = \\sqrt{c^2 - a^2} = \\sqrt{${c}^2 - ${a}^2} = ${b.toFixed(2)} \\]

</p>`;
      }

      if (!(a && b && c)) {
        resultado += `<p>‚ö†Ô∏è Ingresa al menos dos lados v√°lidos.</p>`;
        document.getElementById("resultado").innerHTML = resultado;
        MathJax.typeset();
        return;
      }

      const angleB = Math.atan(b / a) * 180 / Math.PI;
      const angleA = 90 - angleB;
      const angleC = 90;

      const sinB = b / c;
      const cosB = a / c;
      const tanB = b / a;
      const cotB = a / b;
      const secB = c / a;
      const cscB = c / b;

      resultado += `<h3>üìê Razones trigonom√©tricas para el √°ngulo B</h3>`;
      resultado += `<p>\

\[ \\sin(B) = \\frac{${b.toFixed(4)}}{${c.toFixed(4)}} = ${sinB.toFixed(5)} \\]

</p>`;
      resultado += `<p>\

\[ \\cos(B) = \\frac{${a.toFixed(4)}}{${c.toFixed(4)}} = ${cosB.toFixed(5)} \\]

</p>`;
      resultado += `<p>\

\[ \\tan(B) = \\frac{${b.toFixed(4)}}{${a.toFixed(4)}} = ${tanB.toFixed(5)} \\]

</p>`;
      resultado += `<p>\

\[ \\cot(B) = \\frac{${a.toFixed(4)}}{${b.toFixed(4)}} = ${cotB.toFixed(5)} \\]

</p>`;
      resultado += `<p>\

\[ \\sec(B) = \\frac{${c.toFixed(4)}}{${a.toFixed(4)}} = ${secB.toFixed(5)} \\]

</p>`;
      resultado += `<p>\

\[ \\csc(B) = \\frac{${c.toFixed(4)}}{${b.toFixed(4)}} = ${cscB.toFixed(5)} \\]

</p>`;

      resultado += `<h3>‚úÖ Resultados ritualizados</h3>`;
      resultado += `<ul>`;
      resultado += `<li>Cateto a = ${a.toFixed(2)}</li>`;
      resultado += `<li>Cateto b = ${b.toFixed(2)}</li>`;
      resultado += `<li>Hipotenusa c = ${c.toFixed(2)}</li>`;
      resultado += `<li>√Ångulo C = 90¬∞</li>`;
      resultado += `<li>√Ångulo B ‚âà ${angleB.toFixed(2)}¬∞</li>`;
      resultado += `<li>√Ångulo A ‚âà ${angleA.toFixed(2)}¬∞</li>`;
      resultado += `</ul>`;

      document.getElementById("resultado").innerHTML = resultado;
      MathJax.typeset();

      const canvas = document.getElementById("triangulo");
      const ctx = canvas.getContext("2d");
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const escala = 20;
      const Cx = 100, Cy = 500;
      const Bx = Cx + a * escala, By = Cy;
      const Ax = Cx, Ay = Cy - b * escala;

      ctx.beginPath();
      ctx.moveTo(Cx, Cy);
      ctx.lineTo(Bx, By);
      ctx.lineTo(Ax, Ay);
      ctx.closePath();
      ctx.stroke();

      ctx.fillText("C", Cx - 10, Cy + 12);
      ctx.fillText("B", Bx + 8, By + 12);
      ctx.fillText("A", Ax - 12, Ay - 8);

      ctx.fillText(`a = ${a.toFixed(2)}`, (Cx + Bx)/2, By + 16);
      ctx.fillText(`b = ${b.toFixed(2)}`, Cx - 42, (Cy + Ay)/2);
      ctx.fillText(`c = ${c.toFixed(2)}`, (Bx + Ax)/2 - 20, (By + Ay)/2);

      ctx.fillText(`‚à†C = 90¬∞`, Cx + 6, Cy - 6);
      ctx.fillText(`‚à†B ‚âà ${angleB.toFixed(1)}¬∞`, Bx - 50, By - 8);
      ctx.fillText(`‚à†A ‚âà ${angleA.toFixed(1)}¬∞`, Ax + 6, Ay + 16);
    }
  </script>

  <div style="margin-top: 40px; text-align: center;">
    <button onclick="window.location.href='principal.html'">
      üö™ Salir del sistema
    </button>
  </div>
</body>
</html>
