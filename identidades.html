<!DOCTYPE html>
<html>
<head>
  <title>Identidades Trigonom√©tricas Ritualizadas</title>
  <meta charset="utf-8">
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f9f9f9; color: #222; }
    canvas { border: 1px solid #000; margin-top: 20px; background: #fff; }
    input { margin: 5px; width: 120px; padding: 6px; }
    label { display: block; margin-top: 10px; }
    button { padding: 8px 14px; cursor: pointer; }
  </style>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
</head>
<body>
  <h2>üìê Ceremonia de Identidades Trigonom√©tricas</h2>
  <p>Ingresa al menos dos lados del tri√°ngulo rect√°ngulo. En esta rutina, <b>‚à†C = 90¬∞</b> por dise√±o.</p>

  <label>Cateto a (base, adyacente a C): <input type="number" id="a" step="any" placeholder="ej. 8"></label>
  <label>Cateto b (altura, adyacente a C): <input type="number" id="b" step="any" placeholder="ej. 6"></label>
  <label>Hipotenusa c: <input type="number" id="c" step="any" placeholder="ej. 10"></label>
  <button onclick="resolver()">Calcular razones</button>

  <div id="resultado" style="margin-top:20px;"></div>
  <canvas id="triangulo" width="800" height="600"></canvas>

  <script>
    function resolver() {
      const val = id => document.getElementById(id).value.trim();
      let a = parseFloat(val("a"));
      let b = parseFloat(val("b"));
      let c = parseFloat(val("c"));
      let resultado = "";

      // Validaci√≥n b√°sica
      const has = x => !isNaN(x) && x > 0;

      // Detectar y calcular el lado faltante con ‚à†C = 90¬∞ y c como hipotenusa
      if (has(a) && has(b) && !has(c)) {
        c = Math.sqrt(a*a + b*b);
        resultado += `<h3>üìê C√°lculo de la hipotenusa</h3>`;
        resultado += `<p>\

\[ c = \\sqrt{a^2 + b^2} = \\sqrt{${a}^2 + ${b}^2} = ${c.toFixed(2)} \\]

</p>`;
      } else if (has(c) && has(b) && !has(a)) {
        if (c <= b) {
          resultado += `<p>‚ö†Ô∏è La hipotenusa debe ser mayor que el cateto.</p>`;
          document.getElementById("resultado").innerHTML = resultado;
          if (window.MathJax) MathJax.typeset();
          return;
        }
        a = Math.sqrt(c*c - b*b);
        resultado += `<h3>üìê C√°lculo del cateto a</h3>`;
        resultado += `<p>\

\[ a = \\sqrt{c^2 - b^2} = \\sqrt{${c}^2 - ${b}^2} = ${a.toFixed(2)} \\]

</p>`;
      } else if (has(c) && has(a) && !has(b)) {
        if (c <= a) {
          resultado += `<p>‚ö†Ô∏è La hipotenusa debe ser mayor que el cateto.</p>`;
          document.getElementById("resultado").innerHTML = resultado;
          if (window.MathJax) MathJax.typeset();
          return;
        }
        b = Math.sqrt(c*c - a*a);
        resultado += `<h3>üìê C√°lculo del cateto b</h3>`;
        resultado += `<p>\

\[ b = \\sqrt{c^2 - a^2} = \\sqrt{${c}^2 - ${a}^2} = ${b.toFixed(2)} \\]

</p>`;
      }

      if (!(has(a) && has(b) && has(c))) {
        resultado += `<p>‚ö†Ô∏è Ingresa al menos dos lados v√°lidos y positivos.</p>`;
        document.getElementById("resultado").innerHTML = resultado;
        if (window.MathJax) MathJax.typeset();
        return;
      }

      // √Ångulos con C = 90¬∞
      const angleB = Math.atan(b / a) * 180 / Math.PI;   // ‚à†B (en la base derecha)
      const angleA = 90 - angleB;                        // ‚à†A (arriba)
      const angleC = 90;                                 // ‚à†C por dise√±o

      // Razones trigonom√©tricas para el √°ngulo B (agudo)
      const sinB = b / c;
      const cosB = a / c;
      const tanB = b / a;
      const cotB = a / b;
      const secB = c / a;
      const cscB = c / b;

      resultado += `<h3>üìê Razones trigonom√©tricas para el √°ngulo B</h3>`;
      resultado += `<p>\

\[ \\sin(B) = \\frac{${b.toFixed(4)}}{${c.toFixed(4)}} = ${sinB.toFixed(5)} \\]

</p>`;
      resultado += `<p>\

\[ \\cos(B) = \\frac{${a.toFixed(4)}}{${c.toFixed(4)}} = ${cosB.toFixed(5)} \\]

</p>`;
      resultado += `<p>\

\[ \\tan(B) = \\frac{${b.toFixed(4)}}{${a.toFixed(4)}} = ${tanB.toFixed(5)} \\]

</p>`;
      resultado += `<p>\

\[ \\cot(B) = \\frac{${a.toFixed(4)}}{${b.toFixed(4)}} = ${cotB.toFixed(5)} \\]

</p>`;
      resultado += `<p>\

\[ \\sec(B) = \\frac{${c.toFixed(4)}}{${a.toFixed(4)}} = ${secB.toFixed(5)} \\]

</p>`;
      resultado += `<p>\

\[ \\csc(B) = \\frac{${c.toFixed(4)}}{${b.toFixed(4)}} = ${cscB.toFixed(5)} \\]

</p>`;

      resultado += `<h3>‚úÖ Resultados ritualizados</h3>`;
      resultado += `<ul>`;
      resultado += `<li><b>Cateto a:</b> ${a.toFixed(2)}</li>`;
      resultado += `<li><b>Cateto b:</b> ${b.toFixed(2)}</li>`;
      resultado += `<li><b>Hipotenusa c:</b> ${c.toFixed(2)}</li>`;
      resultado += `<li><b>√Ångulo C:</b> ${angleC}¬∞</li>`;
      resultado += `<li><b>√Ångulo B:</b> ${angleB.toFixed(2)}¬∞</li>`;
      resultado += `<li><b>√Ångulo A:</b> ${angleA.toFixed(2)}¬∞</li>`;
      resultado += `</ul>`;

      document.getElementById("resultado").innerHTML = resultado;
      if (window.MathJax) MathJax.typeset();

      // Dibujo del tri√°ngulo rect√°ngulo con C en 90¬∞
      const canvas = document.getElementById("triangulo");
      const ctx = canvas.getContext("2d");
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const escala = 20;
      const Cx = 100, Cy = 500;                 // C: √°ngulo recto
      const Bx = Cx + a * escala, By = Cy;      // B: a la derecha
      const Ax = Cx, Ay = Cy - b * escala;      // A: arriba

      // Tri√°ngulo
      ctx.beginPath();
      ctx.moveTo(Cx, Cy); // C
      ctx.lineTo(Bx, By); // B
      ctx.lineTo(Ax, Ay); // A
      ctx.closePath();
      ctx.stroke();

      // V√©rtices
      ctx.fillText("C", Cx - 10, Cy + 12);
      ctx.fillText("B", Bx + 8, By + 12);
      ctx.fillText("A", Ax - 12, Ay - 8);

      // Lados con valores
      ctx.fillText(`a = ${a.toFixed(2)}`, (Cx + Bx)/2, By + 16);         // base
      ctx.fillText(`b = ${b.toFixed(2)}`, Cx - 42, (Cy + Ay)/2);         // altura
      ctx.fillText(`c = ${c.toFixed(2)}`, (Bx + Ax)/2 - 20, (By + Ay)/2); // hipotenusa

      // √Ångulos
      ctx.fillText(`‚à†C = 90¬∞`, Cx + 6, Cy - 6);
      ctx.fillText(`‚à†B ‚âà ${angleB.toFixed(1)}¬∞`, Bx - 50, By - 8);
      ctx.fillText(`‚à†A ‚âà ${angleA.toFixed(1)}¬∞`, Ax + 6, Ay + 16);
    }
  </script>

  <div style="margin-top: 40px; text-align: center;">
    <button onclick="window.location.href='principal.html'" style="padding: 10px 20px; background-color: #4e342e; color: white; border: none; border-radius: 5px; font-size: 16px;">
      üö™ Salir del sistema
    </button>
  </div>
</body>
</html>
