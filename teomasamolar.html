<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Masa Molar y Composici√≥n Centesimal</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4f4f4;
      padding: 20px;
      color: #333;
    }
    h1 {
      color: #4e342e;
      text-align: center;
    }
    .paso {
      background-color: #fff8e1;
      border-left: 5px solid #ff6f00;
      padding: 10px;
      margin-top: 15px;
    }
    .celebracion {
      background-color: #c8e6c9;
      border-left: 5px solid #388e3c;
      padding: 10px;
      font-weight: bold;
    }
    input {
      margin: 5px;
      width: 100px;
    }
    table {
      border-collapse: collapse;
      margin-top: 10px;
      width: 100%;
    }
    td, th {
      border: 1px solid #ccc;
      padding: 5px;
      text-align: center;
    }
    button {
      padding: 16px 32px;
      margin: 12px;
      font-size: 1.2em;
      background-color: #fff3e0;
      border: 3px solid #ffccbc;
      border-radius: 12px;
      font-weight: bold;
      color: #d84315;
      cursor: pointer;
      min-width: 250px;
      display: inline-block;
      box-shadow: 2px 2px 6px rgba(0,0,0,0.1);
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #ffe0b2;
    }
    .botones {
      text-align: center;
      margin-top: 40px;
    }
    .mensaje {
      text-align: center;
      font-style: italic;
      color: #888;
      margin-top: 20px;
    }
  </style>
</head>
<body>

<h1>‚öóÔ∏è Masa Molar y Composici√≥n Centesimal</h1>
<p style="text-align:center;">Ingresa hasta 4 elementos con sus sub√≠ndices y masas at√≥micas. El sistema calcular√° la masa molar y la composici√≥n porcentual de cada elemento.</p>

<div style="text-align:center;">
  <input id="compuesto" placeholder="Nombre del compuesto (ej. H‚ÇÇSO‚ÇÑ)">
</div>
<div style="text-align:center;">
  <input id="e1" placeholder="Elemento 1"><input id="s1" type="number" placeholder="Sub√≠ndice"><input id="m1" type="number" placeholder="Masa at√≥mica">
</div>
<div style="text-align:center;">
  <input id="e2" placeholder="Elemento 2"><input id="s2" type="number" placeholder="Sub√≠ndice"><input id="m2" type="number" placeholder="Masa at√≥mica">
</div>
<div style="text-align:center;">
  <input id="e3" placeholder="Elemento 3"><input id="s3" type="number" placeholder="Sub√≠ndice"><input id="m3" type="number" placeholder="Masa at√≥mica">
</div>
<div style="text-align:center;">
  <input id="e4" placeholder="Elemento 4"><input id="s4" type="number" placeholder="Sub√≠ndice"><input id="m4" type="number" placeholder="Masa at√≥mica">
</div>

<div style="text-align:center;">
  <button onclick="calcular()">‚ú® Calcular</button>
</div>

<div id="resultado"></div>

<div class="mensaje">
  ¬øListo para cerrar el ciclo celebratorio o regresar a la teor√≠a?
</div>

<div class="botones">
  <button onclick="irATeoria()">üìñ Ir a la teor√≠a celebratoria</button>
  <button onclick="salirDelCiclo()">üèõÔ∏è Volver al selector principal</button>
</div>

<script>
function calcular() {
  const nombre = document.getElementById("compuesto").value.trim();
  const elementos = [];
  for (let i = 1; i <= 4; i++) {
    const el = document.getElementById(`e${i}`).value.trim();
    const sub = parseFloat(document.getElementById(`s${i}`).value);
    const masa = parseFloat(document.getElementById(`m${i}`).value);
    if (el && !isNaN(sub) && !isNaN(masa)) {
      elementos.push({ simbolo: el, subindice: sub, masaAtomica: masa });
    }
  }

  if (elementos.length === 0) {
    document.getElementById("resultado").innerHTML = "<div class='paso'>‚ö†Ô∏è Debes ingresar al menos un elemento con su sub√≠ndice y masa at√≥mica.</div>";
    return;
  }

  let masaTotal = 0;
  let html = `<div class="paso">üîç Compuesto: <strong>${nombre || '(sin nombre)'}</strong></div>`;
  html += `<div class="paso">üßÆ Paso 1: C√°lculo de masa molar<br><table><tr><th>Elemento</th><th>Masa at√≥mica</th><th>Sub√≠ndice</th><th>Multiplicaci√≥n</th><th>Masa total</th></tr>`;

  elementos.forEach(e => {
    e.masaElemento = e.subindice * e.masaAtomica;
    masaTotal += e.masaElemento;
    html += `<tr><td>${e.simbolo}</td><td>${e.masaAtomica}</td><td>${e.subindice}</td><td>${e.masaAtomica} √ó ${e.subindice}</td><td>${e.masaElemento.toFixed(3)}</td></tr>`;
  });

  html += `</table><br><strong>Masa molar total:</strong> ${masaTotal.toFixed(3)} g/mol</div>`;

  html += `<div class="paso">üìä Paso 2: Composici√≥n centesimal<br><table><tr><th>Elemento</th><th>Masa del elemento</th><th>Operaci√≥n</th><th>Porcentaje (%)</th></tr>`;
  let sumaPorcentajes = 0;

  elementos.forEach(e => {
    e.porcentaje = (e.masaElemento / masaTotal) * 100;
    sumaPorcentajes += e.porcentaje;
    const operacion = `\\(\\frac{${e.masaElemento.toFixed(3)}}{${masaTotal.toFixed(3)}} \\times 100\\)`;
    html += `<tr><td>${e.simbolo}</td><td>${e.masaElemento.toFixed(3)}</td><td>${operacion}</td><td>${e.porcentaje.toFixed(2)}%</td></tr>`;
  });

  html += `<tr><th colspan="3">Suma total</th><th>${sumaPorcentajes.toFixed(2)}%</th></tr>`;
  html += `</table></div>`;

  html += `<div class="celebracion">üéä C√°lculo completado. Cada elemento ha revelado su peso en el todo.</div>`;

  document.getElementById("resultado").innerHTML = html;
  if (window.MathJax && MathJax.typeset) MathJax.typeset();
}

function irATeoria() {
  window.location.href = "teomasamolar.html?origen=masamolar";
}

function salirDelCiclo() {
  window.top.location.href = "principal.html";
}
</script>

</body>
</html>
