<!DOCTYPE html>
<html>
<head>
  <title>Teorema de Pit√°goras Ritualizado</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f9f9f9; }
    canvas { border: 1px solid #000; margin-top: 20px; }
    input { margin: 5px; width: 100px; }
    label { display: block; margin-top: 10px; }
  </style>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
</head>
<body>
  <h2>üü¶ Ceremonia del Teorema de Pit√°goras</h2>
  <p>Ingresa dos lados del tri√°ngulo rect√°ngulo:</p>

  <label>Cateto a: <input type="number" id="a"></label>
  <label>Cateto b: <input type="number" id="b"></label>
  <label>Hipotenusa c: <input type="number" id="c"></label>
  <button onclick="resolver()">Aplicar Teorema</button>

  <div id="resultado" style="margin-top:20px;"></div>
  <canvas id="triangulo" width="800" height="600"></canvas>

  <script>
    function resolver() {
      let a = parseFloat(document.getElementById("a").value);
      let b = parseFloat(document.getElementById("b").value);
      let c = parseFloat(document.getElementById("c").value);
      let resultado = "";

      // Calcular hipotenusa
      if (a && b && !c) {
        c = Math.sqrt(a*a + b*b);
        resultado += `<h3>üìê C√°lculo de la hipotenusa:</h3>`;
        resultado += `<p>\\[ c = \\sqrt{a^2 + b^2} \\]</p>`;
        resultado += `<p>\\[ c = \\sqrt{${a}^2 + ${b}^2} = \\sqrt{${(a*a).toFixed(2)} + ${(b*b).toFixed(2)}} = ${c.toFixed(2)} \\]</p>`;
      }

      // Calcular cateto a
      else if (b && c && !a) {
        if (c <= b) {
          resultado += `<p>‚ö†Ô∏è La hipotenusa debe ser mayor que el cateto.</p>`;
        } else {
          a = Math.sqrt(c*c - b*b);
          resultado += `<h3>üìê C√°lculo del cateto a:</h3>`;
          resultado += `<p>\\[ a = \\sqrt{c^2 - b^2} \\]</p>`;
          resultado += `<p>\\[ a = \\sqrt{${c}^2 - ${b}^2} = \\sqrt{${(c*c).toFixed(2)} - ${(b*b).toFixed(2)}} = ${a.toFixed(2)} \\]</p>`;
        }
      }

      // Calcular cateto b
      else if (a && c && !b) {
        if (c <= a) {
          resultado += `<p>‚ö†Ô∏è La hipotenusa debe ser mayor que el cateto.</p>`;
        } else {
          b = Math.sqrt(c*c - a*a);
          resultado += `<h3>üìê C√°lculo del cateto b:</h3>`;
          resultado += `<p>\\[ b = \\sqrt{c^2 - a^2} \\]</p>`;
          resultado += `<p>\\[ b = \\sqrt{${c}^2 - ${a}^2} = \\sqrt{${(c*c).toFixed(2)} - ${(a*a).toFixed(2)}} = ${b.toFixed(2)} \\]</p>`;
        }
      }

      // Mostrar resultados
      resultado += `<h3>‚úÖ Resultados ritualizados:</h3>`;
      resultado += `<ul>`;
      resultado += `<li>Cateto a = ${a?.toFixed(2) || "?"}</li>`;
      resultado += `<li>Cateto b = ${b?.toFixed(2) || "?"}</li>`;
      resultado += `<li>Hipotenusa c = ${c?.toFixed(2) || "?"}</li>`;
      resultado += `</ul>`;

      document.getElementById("resultado").innerHTML = resultado;
      MathJax.typeset();

      // Dibujo del tri√°ngulo rect√°ngulo
      const canvas = document.getElementById("triangulo");
      const ctx = canvas.getContext("2d");
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      if (a && b && c) {
        const escala = 20;
        const Ax = 100, Ay = 500;
        const Bx = Ax, By = Ay - b * escala;
        const Cx = Ax + a * escala, Cy = Ay;

        ctx.beginPath();
        ctx.moveTo(Ax, Ay); // A
        ctx.lineTo(Bx, By); // B
        ctx.lineTo(Cx, Cy); // C
        ctx.closePath();
        ctx.stroke();

        // V√©rtices
        ctx.fillText("A", Ax - 10, Ay + 10);
        ctx.fillText("B", Bx - 10, By - 10);
        ctx.fillText("C", Cx + 10, Cy + 10);

        // Lados con valores
        ctx.fillText(`a = ${a.toFixed(2)}`, (Ax + Cx)/2, Ay + 15); // base
        ctx.fillText(`b = ${b.toFixed(2)}`, Ax - 40, (Ay + By)/2); // altura
        ctx.fillText(`c = ${c.toFixed(2)}`, (Cx + Bx)/2, (Cy + By)/2); // hipotenusa

        // √Ångulo recto
        ctx.fillText("90¬∞", Ax + 5, Ay - 5);
      }
    }
  </script>
</body>
</html>