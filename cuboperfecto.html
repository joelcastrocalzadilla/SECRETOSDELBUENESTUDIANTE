<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Cubo Perfecto de un Binomio</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <style>
    body { font-family: 'Segoe UI', sans-serif; background: #fdfdfd; padding: 20px; }
    h1 { color: #4e342e; }
    .paso { background: #e3f2fd; border-left: 5px solid #1e88e5; padding: 10px; margin: 10px 0; }
    input[type="text"], input[type="number"] { width: 60px; margin-right: 10px; }
    button { background: #1e88e5; color: white; border: none; padding: 10px 15px; cursor: pointer; }
    button:hover { background: #1565c0; }
    #resultado { margin-top: 20px; background: #fff8e1; border-left: 5px solid #ffb300; padding: 10px; }
  </style>
</head>
<body>

<h1>ðŸ§® Cubo Perfecto de un Binomio</h1>

<p><strong>Primer tÃ©rmino:</strong></p>
Signo: <input type="text" id="signo1" value="+">
Coef: <input type="number" id="a" value="2">
Var1: <input type="text" id="var1a" value="x"> Exp1: <input type="number" id="exp1a" value="1">
Var2: <input type="text" id="var2a" value="y"> Exp2: <input type="number" id="exp2a" value="0">

<p><strong>Segundo tÃ©rmino:</strong></p>
Signo: <input type="text" id="signo2" value="-">
Coef: <input type="number" id="b" value="3">
Var1: <input type="text" id="var1b" value="y"> Exp1: <input type="number" id="exp1b" value="2">
Var2: <input type="text" id="var2b" value=""> Exp2: <input type="number" id="exp2b" value="0">

<button onclick="expandir()">Expandir</button>

<div id="resultado"></div>

<script>
function construirTermino(signo, coef, var1, exp1, var2, exp2) {
  let t = (signo === "-" ? "-" : "") + coef.toString();
  if (var1 && exp1 !== 0) t += var1 + "^{" + exp1 + "}";
  if (var2 && exp2 !== 0) t += var2 + "^{" + exp2 + "}";
  return t;
}

function construirVariablesMultiplicadas(v1a, e1a, v2a, e2a, v1b, e1b, v2b, e2b, potA = 1, potB = 1) {
  let vars = {};
  if (v1a) vars[v1a] = (vars[v1a] || 0) + e1a * potA;
  if (v2a) vars[v2a] = (vars[v2a] || 0) + e2a * potA;
  if (v1b) vars[v1b] = (vars[v1b] || 0) + e1b * potB;
  if (v2b) vars[v2b] = (vars[v2b] || 0) + e2b * potB;

  let resultado = "";
  for (let v in vars) {
    if (vars[v] !== 0) resultado += v + "^{" + vars[v] + "}";
  }
  return resultado;
}

function construirVariablesPotenciadas(var1, exp1, var2, exp2, potencia) {
  let resultado = "";
  if (var1 && exp1 !== 0) resultado += var1 + "^{" + (exp1 * potencia) + "}";
  if (var2 && exp2 !== 0) resultado += var2 + "^{" + (exp2 * potencia) + "}";
  return resultado;
}

function signoMultiplicado(...signos) {
  let negativo = signos.filter(s => s === "-").length;
  return (negativo % 2 === 0) ? "+" : "âˆ’";
}

function expandir() {
  const signo1 = (document.getElementById('signo1').value.trim() || "+").replace(/\s/g, "");
  const a = parseFloat(document.getElementById('a').value);
  const var1a = document.getElementById('var1a').value;
  const exp1a = parseInt(document.getElementById('exp1a').value);
  const var2a = document.getElementById('var2a').value;
  const exp2a = parseInt(document.getElementById('exp2a').value);

  const signo2 = (document.getElementById('signo2').value.trim() || "+").replace(/\s/g, "");
  const b = parseFloat(document.getElementById('b').value);
  const var1b = document.getElementById('var1b').value;
  const exp1b = parseInt(document.getElementById('exp1b').value);
  const var2b = document.getElementById('var2b').value;
  const exp2b = parseInt(document.getElementById('exp2b').value);

  const aTerm = construirTermino(signo1, a, var1a, exp1a, var2a, exp2a);
  const bTerm = construirTermino(signo2, b, var1b, exp1b, var2b, exp2b);

  let binomioVisual = signo2 === "-" ? `${aTerm} ${bTerm}` : `${aTerm} + ${bTerm.replace("+", "")}`;

  const paso1 = Math.pow(a, 3);
  const paso2 = 3 * Math.pow(a, 2) * b;
  const paso3 = 3 * a * Math.pow(b, 2);
  const paso4 = Math.pow(b, 3);

  const signoPaso1 = (signo1 === "-") ? "-" : "+";
  const signoPaso2 = signoMultiplicado("+", signo1, signo1, signo2);
  const signoPaso3 = signoMultiplicado("+", signo1, signo2, signo2);
  const signoPaso4 = signoMultiplicado(signo2, signo2, signo2);

  const varA3 = construirVariablesPotenciadas(var1a, exp1a, var2a, exp2a, 3);
  const varB3 = construirVariablesPotenciadas(var1b, exp1b, var2b, exp2b, 3);
  const varA2B = construirVariablesMultiplicadas(var1a, exp1a, var2a, exp2a, var1b, exp1b, var2b, exp2b, 2, 1);
  const varAB2 = construirVariablesMultiplicadas(var1a, exp1a, var2a, exp2a, var1b, exp1b, var2b, exp2b, 1, 2);

  let pasos = '';
  pasos += `<div class="paso">ðŸ”° Binomio ingresado: \\((${binomioVisual})^3\\)</div>`;
  pasos += `<div class="paso">ðŸ”¹ Paso 1: Cubo del primero â†’ \\(${signoPaso1}${paso1}${varA3}\\)</div>`;
  pasos += `<div class="paso">ðŸ”¹ Paso 2: Triple del cuadrado del primero por el segundo â†’ \\(${signoPaso2}${paso2}${varA2B}\\)</div>`;
  pasos += `<div class="paso">ðŸ”¹ Paso 3: Triple del primero por el cuadrado del segundo â†’ \\(${signoPaso3}${paso3}${varAB2}\\)</div>`;
  pasos += `<div class="paso">ðŸ”¹ Paso 4: Cubo del segundo â†’ \\(${signoPaso4}${paso4}${varB3}\\)</div>`;

    const resultado = `\\(${signoPaso1}${paso1}${varA3} ${signoPaso2} ${paso2}${varA2B} ${signoPaso3} ${paso3}${varAB2} ${signoPaso4} ${paso4}${varB3}\\)`;
  pasos += `<div class="paso">ðŸŽ‰ Resultado expandido: ${resultado}</div>`;

  document.getElementById('resultado').innerHTML = pasos;
  MathJax.typeset();
}
</script>
<div style="margin-top: 40px; text-align: center;">
  <button onclick="window.location.href='principal.html'" style="padding: 10px 20px; background-color: #4e342e; color: white; border: none; border-radius: 5px; font-size: 16px;">
    ðŸšª Salir del sistema
  </button>
</div>

</body>

</html>
