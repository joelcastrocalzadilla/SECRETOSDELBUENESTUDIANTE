<!DOCTYPE html>
<html>
<head>
  <title>Elipse Ritualizada</title>
  <style>
    body { font-family: Arial; padding: 20px; background: #f0f0f0; }
    input { width: 80px; margin: 5px; }
    canvas { border: 1px solid #000; margin-top: 20px; }
  </style>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
    src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
</head>
<body>
  <h2>üî∑ Ceremonia de la Elipse</h2>
  <p>Ingresa el centro de la elipse:</p>
  <label>h (x del centro): <input type="number" id="h"></label>
  <label>k (y del centro): <input type="number" id="k"></label>

  <h3>üìè Semiejes:</h3>
  <label>a (semieje mayor): <input type="number" id="a"></label>
  <label>b (semieje menor): <input type="number" id="b"></label>

  <br><br>
  <button onclick="resolver()">Calcular y dibujar</button>

  <div id="resultado" style="margin-top:20px;"></div>
  <canvas id="dibujo" width="600" height="400"></canvas>

  <script>
    function resolver() {
      const h = parseFloat(document.getElementById("h").value);
      const k = parseFloat(document.getElementById("k").value);
      const a = parseFloat(document.getElementById("a").value);
      const b = parseFloat(document.getElementById("b").value);

      let resultado = "";

      if (isNaN(h) || isNaN(k) || isNaN(a) || isNaN(b)) {
        resultado = "<p>‚ö†Ô∏è Debes ingresar el centro y los semiejes.</p>";
        document.getElementById("resultado").innerHTML = resultado;
        return;
      }

      const c = Math.sqrt(Math.abs(a * a - b * b));
      const ladoRecto = (2 * b * b) / a;

      resultado += `<h3>üìê Ecuaci√≥n can√≥nica:</h3>`;
      resultado += `<p>\\[ \\frac{(x - ${h})^2}{${a * a}} + \\frac{(y - ${k})^2}{${b * b}} = 1 \\]</p>`;

      resultado += `<h3>üìè Distancia focal:</h3>`;
      resultado += `<p>\\[ c = \\sqrt{a^2 - b^2} = \\sqrt{${a}^2 - ${b}^2} = ${c.toFixed(2)} \\]</p>`;

      resultado += `<h3>üìè Lado recto:</h3>`;
      resultado += `<p>\\[ l = \\frac{2b^2}{a} = \\frac{2 \\cdot ${b}^2}{${a}} = ${ladoRecto.toFixed(2)} \\]</p>`;

      resultado += `<h3>üìç V√©rtices:</h3>`;
      resultado += `<p>\\[ V_1 = (${h - a}, ${k}) \\quad V_2 = (${h + a}, ${k}) \\]</p>`;

      resultado += `<h3>üìç Focos:</h3>`;
      resultado += `<p>\\[ F_1 = (${h - c.toFixed(2)}, ${k}) \\quad F_2 = (${h + c.toFixed(2)}, ${k}) \\]</p>`;

      document.getElementById("resultado").innerHTML = resultado;
      MathJax.typeset();

      // Dibujo
      const canvas = document.getElementById("dibujo");
      const ctx = canvas.getContext("2d");
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const escala = 10;
      const cx = canvas.width / 2;
      const cy = canvas.height / 2;

      const centroX = cx + h * escala;
      const centroY = cy - k * escala;
      const aPix = a * escala;
      const bPix = b * escala;
      const cPix = c * escala;

      // Elipse
      ctx.beginPath();
      ctx.ellipse(centroX, centroY, aPix, bPix, 0, 0, 2 * Math.PI);
      ctx.strokeStyle = "blue";
      ctx.lineWidth = 2;
      ctx.stroke();

      // Centro
      ctx.beginPath();
      ctx.arc(centroX, centroY, 4, 0, 2 * Math.PI);
      ctx.fillStyle = "black";
      ctx.fill();
      ctx.fillText(`Centro (${h}, ${k})`, centroX + 10, centroY - 10);

      // V√©rtices
      ctx.fillStyle = "green";
      ctx.beginPath();
      ctx.arc(centroX - aPix, centroY, 4, 0, 2 * Math.PI);
      ctx.fill();
      ctx.fillText(`V‚ÇÅ (${h - a}, ${k})`, centroX - aPix - 40, centroY - 10);

      ctx.beginPath();
      ctx.arc(centroX + aPix, centroY, 4, 0, 2 * Math.PI);
      ctx.fill();
      ctx.fillText(`V‚ÇÇ (${h + a}, ${k})`, centroX + aPix + 10, centroY - 10);

      // Focos
      ctx.fillStyle = "red";
      ctx.beginPath();
      ctx.arc(centroX - cPix, centroY, 4, 0, 2 * Math.PI);
      ctx.fill();
      ctx.fillText(`F‚ÇÅ (${(h - c).toFixed(2)}, ${k})`, centroX - cPix - 40, centroY + 15);

      ctx.beginPath();
      ctx.arc(centroX + cPix, centroY, 4, 0, 2 * Math.PI);
      ctx.fill();
      ctx.fillText(`F‚ÇÇ (${(h + c).toFixed(2)}, ${k})`, centroX + cPix + 10, centroY + 15);
    }
  </script>
  <div style="margin-top: 40px; text-align: center;">
  <button onclick="window.location.href='principal.html'" style="padding: 10px 20px; background-color: #4e342e; color: white; border: none; border-radius: 5px; font-size: 16px;">
    üö™ Salir del sistema
  </button>
</div>

</body>

</html>
